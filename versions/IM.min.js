(function(c){var n=false,m=false,b=0,a=[],g=h;function k(p,r,t){var s=p.concat();var o=p.length-1;var u=+new Date();setTimeout(function q(){do{o--;if(r(s.shift(),o)===false){return}}while(s.length>0&&(+new Date()-u<50));if(s.length>0){setTimeout(q,25)}else{t(p)}},25)}function h(p,q,s){var r=p.concat();var o=p.length-1;var t=null;while(Boolean(t=r.shift())){o--;if(q(t,o)===false){return}}s(p)}function d(o,p,t,r){var q=null,s=undefined;if(n&&typeof r==="undefined"){r=+new Date()}g(o,function(y,u){var x=y.getContext("2d"),w=x.getImageData(0,0,y.height,y.width),v=JSON.stringify([].slice.call(w.data));if(q!==null){if(q.localeCompare(v)!==0){if(n){y.className="fail";s=(+new Date()-r);console.log("Fail -> Time: "+s);console.log("Failing  canvas is: ");console.log(document.getElementById("canvasCompare_"+u))}t(y,s);return false}}q=v},function(u){if(n){s=(+new Date()-r);console.log("Success -> Time: "+s)}p(u,s)})}function i(q,t,p,s){a=[];if(n){var r=+new Date()}g(t,function(v,u){var y,x,w;y=document.createElement("canvas");y.id="canvasCompare_"+u;a.push(y);y.width=v.width;y.height=v.height;q.appendChild(y);x=y.getContext("2d");w=new Image();w.onload=function(){b++;x.drawImage(w,0,0)};w.onerror=function(){b++};w.src=v.src},function o(u){if(b<u.length){setTimeout(function(){o(u)},25)}else{d(a,p,s,r);if(n&&m){console.log("After compare -> Time: "+(+new Date()-r))}}})}var f=function(q,p,o){this.src=q+(q.indexOf("?")===-1?"?":"&")+(+new Date());this.width=p;this.height=o};function e(){}e.prototype.setDebug=function j(o){n=o;return n};e.prototype.setAsynchronous=function l(o){m=o;g=m?k:h;return o};e.prototype.compare=function(p,r,o,q){if(!p.nodeType){d.apply(this,arguments)}else{i.apply(this,arguments)}};e.prototype.image=f;c.IM=new e()}(window));